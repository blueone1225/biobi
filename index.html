<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>惡靈古堡3 - 錯位場景模擬</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: sans-serif;
    }
    #viewport {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }
    #gameArea {
      width: 2000px;
      height: 1000px;
      background-image: url('https://image1.gamme.com.tw/news2/2025/16/3/qZ7H05_ew6GdqauZkZ2dl43Y1d4.webp');
      background-size: cover;
      position: relative;
    }
    .character {
      position: absolute;
      width: 200px;
      height: 200px;
      background-size: cover;
      background-position: center;
    }
    #jill {
      top: 100px;
      left: 1500px;
      background-image: url('https://s.yimg.com/os/creatr-uploaded-images/2019-12/d92e0c30-254b-11ea-bf72-ccd9056172b3');
    }
    #dog {
      top: 680px;
      left: -300px; /* 初始畫面外 */
      background-image: url('https://i.ytimg.com/vi/_Yo7RTDRQ6g/hqdefault.jpg');
    }
    #corpse {
      top: 720px;
      left: 870px;
      width: 240px;
      height: 160px;
      background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJPxwWQCF8yT9TcKvehq7MDzG2er1grlblEVa_srYZc0iUIyzY');
      background-size: cover;
    }
    .speech-bubble {
      position: absolute;
      background: #fff;
      padding: 8px;
      border-radius: 10px;
      border: 2px solid #333;
      max-width: 120px;
      font-size: 14px;
      z-index: 10;
    }
    #dog-bubble {
      top: 630px;
      left: 800px;
      display: none;
    }
    #blood {
      position: absolute;
      width: 160px;
      height: 160px;
      background-image: url('https://pngimg.com/uploads/blood/blood_PNG6139.png');
      background-size: contain;
      background-repeat: no-repeat;
      top: 710px;
      left: 880px;
      opacity: 0;
    }
    @keyframes splatter {
      0% { opacity: 0; transform: scale(0.3); }
      100% { opacity: 1; transform: scale(1); }
    }
    #replayBtn {
      position: absolute;
      top: 20px;
      left: 20px;
      padding: 10px 20px;
      font-size: 16px;
      z-index: 100;
    }
  </style>
</head>
<body>

<div id="viewport">
  <button id="replayBtn" onclick="restartScene()">重播</button>
  <div id="gameArea">
    <div id="jill" class="character"></div>
    <div id="dog" class="character"></div>
    <div id="corpse" class="character"></div>
    <div id="blood"></div>
    <div id="dog-bubble" class="speech-bubble">嗷嗚… 真香！</div>
  </div>
</div>

<audio id="biteSound" src="https://cdn.pixabay.com/audio/2021/08/08/audio_661667e56c.mp3"></audio>
<audio id="bloodSound" src="https://cdn.pixabay.com/audio/2023/09/03/audio_d2a6c0f76f.mp3"></audio>

<script>
  const dog = document.getElementById('dog');
  const jill = document.getElementById('jill');
  const blood = document.getElementById('blood');
  const bubble = document.getElementById('dog-bubble');
  const biteSound = document.getElementById('biteSound');
  const bloodSound = document.getElementById('bloodSound');

  function playSounds() {
    biteSound.currentTime = 0;
    bloodSound.currentTime = 0;
    biteSound.play();
    setTimeout(() => {
      bloodSound.play();
    }, 1000);
  }

  function dogEnterAndBite() {
    let left = -300;
    let step = 5;
    const stopAt = 880;
    const walkInterval = setInterval(() => {
      left += step;
      dog.style.left = `${left}px`;
      if (left >= stopAt) {
        clearInterval(walkInterval);
        startBite();
      }
    }, 30);
  }

  function startBite() {
    dog.style.animation = 'bite 1.5s infinite';
    document.getElementById('blood').style.animation = 'splatter 2s forwards';
    bubble.style.display = 'block';
    playSounds();
  }

  function moveJillRandomly() {
    setInterval(() => {
      const randX = 1500 + Math.random() * 200;
      const randY = 100 + Math.random() * 100;
      jill.style.left = `${randX}px`;
      jill.style.top = `${randY}px`;
    }, 2000);
  }

  function restartScene() {
    // Reset
    dog.style.left = '-300px';
    dog.style.animation = 'none';
    blood.style.animation = 'none';
    bubble.style.display = 'none';
    void blood.offsetWidth;
    setTimeout(() => {
      dogEnterAndBite();
    }, 300);
  }

  window.onload = () => {
    dogEnterAndBite();
    moveJillRandomly();
  }
</script>

</body>
</html>
